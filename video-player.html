<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>MFLIX Player</title>
    <meta name="description" content="Watch movies, web series and anime in high quality on MFLIX player." />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#0b1020" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/assets/css/base.css" />
    <link rel="stylesheet" href="/assets/css/player.css" />
  </head>
  <body class="player-page">
    <div class="player-layout">
      <div class="network-mini" id="networkMini">You are offline. Streaming may fail until connection returns.</div>

      <section class="video-shell">
        <video id="vdo" controls autoplay playsinline preload="metadata" poster="">
          <source id="videoSource" src="" type="video/mp4" />
        </video>

        <div class="video-top">
          <div class="video-top-left">
            <button class="icon-circle" id="backBtn" title="Back">
              <i class="fa-solid fa-arrow-left"></i>
            </button>
            <div class="video-title-pill" id="overlayTitle">Loading title...</div>
          </div>
          <div class="video-top-right">
            <div style="position: relative">
              <button class="icon-circle" id="qualityBtn" title="Video quality"><i class="fa-solid fa-layer-group"></i></button>
              <div class="menu-popup" id="qualityMenu"></div>
            </div>
            <div style="position: relative">
              <button class="icon-circle" id="speedBtn" title="Playback speed"><i class="fa-solid fa-gauge-high"></i></button>
              <div class="menu-popup" id="speedMenu"></div>
            </div>
            <button class="icon-circle" id="fitBtn" title="Fit mode"><i class="fa-solid fa-expand"></i></button>
            <button class="icon-circle" id="pipBtn" title="Picture in Picture"><i class="fa-regular fa-clone"></i></button>
            <button class="icon-circle" id="fullBtn" title="Fullscreen"><i class="fa-solid fa-maximize"></i></button>
          </div>
        </div>

        <button class="skip-pill" id="skipIntroBtn"><i class="fa-solid fa-forward"></i> Skip Intro 90s</button>

        <div class="floating-controls">
          <button class="control-chip" id="shareQuickBtn"><i class="fa-solid fa-share-nodes"></i> Share</button>
          <button class="control-chip hidden" id="nextEpisodeBtn"><i class="fa-solid fa-forward-step"></i> Next Episode</button>
        </div>

        <div class="watch-progress"><span id="watchProgressFill"></span></div>
      </section>

      <section class="player-scroll">
        <div class="player-container">
          <article class="panel main-panel">
            <div class="skeleton-pane" id="skeletonPane">
              <div class="skeleton skeleton-tile" style="height: 30px; width: 70%"></div>
              <div class="skeleton skeleton-tile" style="height: 20px; width: 36%"></div>
              <div class="skeleton skeleton-tile" style="height: 46px; width: 100%"></div>
              <div class="skeleton skeleton-tile" style="height: 16px; width: 90%"></div>
              <div class="skeleton skeleton-tile" style="height: 16px; width: 88%"></div>
              <div class="skeleton skeleton-tile" style="height: 16px; width: 70%"></div>
            </div>

            <div id="realContent" class="hidden">
              <div class="title-line">
                <h1 id="movieTitle"></h1>
                <span class="badge-quality" id="qualityBadge">HD</span>
              </div>

              <div class="meta-row">
                <div class="meta-pill" id="cert">UA</div>
                <div class="meta-pill"><i class="fa-solid fa-star" style="color: #ffc107"></i> <span id="rating">--</span></div>
                <div class="meta-pill"><i class="fa-solid fa-calendar-days"></i> <span id="year">--</span></div>
                <div class="meta-pill"><i class="fa-solid fa-film"></i> <span id="genre">--</span></div>
                <div class="meta-pill"><i class="fa-regular fa-clock"></i> <span id="runtime">--</span></div>
              </div>

              <div class="resume-bar" id="resumeBar">
                <span id="resumeText">Resume from previous session</span>
                <button class="btn btn-primary" id="resumeBtn">Resume</button>
              </div>

              <div class="actions-grid" id="actionContainer">
                <div id="movieBtnsWrapper" style="display: contents">
                  <div style="position: relative">
                    <button class="btn-main" id="playMainBtn"><i class="fa-solid fa-play"></i> Play Movie</button>
                    <div class="menu-popup" id="playMenu"></div>
                  </div>
                  <div style="position: relative">
                    <button class="btn-secondary" id="downloadBtn" title="Download"><i class="fa-solid fa-download"></i></button>
                    <div class="menu-popup" id="downloadMenu"></div>
                  </div>
                </div>
                <button class="btn-main hidden" id="episodesBtn"><i class="fa-solid fa-layer-group"></i> View Episodes</button>
                <button class="btn-secondary" id="trailerBtn" title="Open trailer/search">
                  <i class="fa-brands fa-youtube"></i>
                </button>
              </div>

              <div class="social-row">
                <button class="social-btn" id="myListBtn"><i class="fa-solid fa-plus"></i> My List</button>
                <button class="social-btn" id="likeBtn"><i class="fa-regular fa-thumbs-up"></i> Like</button>
                <button class="social-btn" id="shareBtn"><i class="fa-solid fa-share-nodes"></i> Share</button>
                <button class="social-btn" id="reportBtn"><i class="fa-regular fa-flag"></i> Report</button>
              </div>

              <div class="divider" style="margin: 15px 0"></div>

              <div class="synopsis" id="plot"></div>

              <div class="details-grid">
                <article class="detail-tile">
                  <p>Language</p>
                  <p id="language">--</p>
                </article>
                <article class="detail-tile">
                  <p>Director</p>
                  <p id="director">--</p>
                </article>
                <article class="detail-tile">
                  <p>Cast</p>
                  <p id="cast">--</p>
                </article>
                <article class="detail-tile">
                  <p>Platform</p>
                  <p id="platform">--</p>
                </article>
              </div>
            </div>
          </article>

          <aside class="panel sidebar-panel">
            <section class="side-card">
              <h3>Playback Tips</h3>
              <div style="padding: 10px" class="keyboard-help">
                <p><kbd>Space</kbd> Play/Pause, <kbd>←</kbd>/<kbd>→</kbd> seek 10s</p>
                <p><kbd>F</kbd> Fullscreen, <kbd>M</kbd> mute, <kbd>P</kbd> PiP</p>
                <p><kbd>[</kbd>/<kbd>]</kbd> speed -, +, <kbd>C</kbd> fit mode</p>
              </div>
            </section>

            <section class="side-card">
              <h3>More Like This</h3>
              <div class="related-grid" id="relatedGrid"></div>
            </section>
          </aside>
        </div>
      </section>
    </div>

    <div class="episodes-overlay" id="episodesOverlay">
      <div class="episodes-modal">
        <div class="ep-head">
          <h3>Episodes</h3>
          <div>
            <span class="status-pill" id="epCountPill">0 episodes</span>
            <button class="icon-circle" id="closeEpBtn" title="Close episodes"><i class="fa-solid fa-xmark"></i></button>
          </div>
        </div>
        <div class="ep-tools">
          <input class="ep-search" id="epSearchInput" type="text" placeholder="Search episode title..." />
          <select class="season-select" id="seasonSelect"></select>
        </div>
        <div class="ep-body" id="episodesList"></div>
      </div>
    </div>

    <div class="modal-backdrop" id="reportModal">
      <div class="modal-card">
        <div class="modal-head">
          <h3 class="modal-title">Report Issue</h3>
        </div>
        <div class="modal-body">
          <label for="reportText">What went wrong?</label>
          <textarea
            id="reportText"
            class="input"
            rows="4"
            placeholder="Video not playing, wrong content, audio issue..."
            style="margin-top: 8px; resize: vertical"
          ></textarea>
        </div>
        <div class="modal-foot">
          <button class="btn" id="closeReportBtn">Cancel</button>
          <button class="btn btn-primary" id="submitReportBtn">Submit</button>
        </div>
      </div>
    </div>

    <div class="toast-stack" id="toastStack"></div>
    <script type="module" src="/assets/js/player.js"></script>
  </body>
</html>
